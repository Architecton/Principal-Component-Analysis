% compress_image(image_name, num_singular_vectors)
% Compress image with name image_name using singular value decomposition by
% approximating the original image with a matrix with specified rank which
% is lower or equal to the rank of
function [M1, M2, compression_ratio] = compress_image(image_name, num_singular_values)
	im = imread(image_name);	% Read image.
	im = im(:,:,1);				% Remove third dimension.
	im = double(im);
	[U E V] = svd(im);			% Perform SVD.
	% Approximate original image with a lower rank matrix.
	M1 = U * E(:,1:num_singular_values);	% Matrices needed to reconstruct the image
	M2 = V(:,1:num_singular_values)';
	
	% Compute compression ratio.
	original_size = numel(im);
	compressed_size = numel(M1) + numel(M2);
	compression_ratio = compressed_size / original_size;
	
end